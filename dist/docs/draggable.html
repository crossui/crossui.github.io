<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>draggable</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="../iconfont/iconfont.css">
    <link rel="stylesheet" href="../css/cross.css">
    <link rel="stylesheet" href="../css/highlight.css">
    <style>
        #draggableBox {
            height: 340px;
            background-color: #fafafa;
            position: relative;
        }
        #draggableBtn {
            position: absolute; /* 被拖动的元素必须设置 position 为 absolute */
            top: 10px;
            left: 10px;
        }


        #draggableBox2 {
            height: 340px;
            background-color: #fafafa;
            position: relative;
        }
        #draggableBox2 .btn-draggable {
            position: absolute;
            transition: none;
            cursor: move;
        }
        #dragLog2 {
            margin: 0;
            border: none;
            background: none;
        }
    </style>
</head>
<body>
<div class="p-medium">

    <fieldset class="c-field">
        <legend>引用</legend>
        <div class="c-field-box">
<pre><code class="html c-break">
    &lt;script type="text/javascript" src="../js/draggable/draggable.js"&gt;&lt;/script&gt;
</code></pre>
        </div>
    </fieldset>


    <div class="c-border p-small border-radius-rounded mt-medium">

        <div class="demo-nicescroll w1200 h300 bgc-gray c-main">
            <div id="draggableBox">
                <pre id="dragLog" class="pre-scrollable">用于输出演示日志信息</pre>
                <button id="draggableBtn" type="button" class="button button-primary"><i class="iconfont icon-arrows fs5"></i> <span id="printPosition">拖动我</span></button>
            </div>
        </div>



        <fieldset class="c-field c-field-title mt-medium">
            <legend class="fs6">拖动</legend>
        </fieldset>
        <div class="c-field-box c-position-r">
            <div class="c-position-a" style="top: 0; right: 0">
                <a data-toggle="collapse" data-parent="#accordion" href="#draggabilly1" class="border-radius-circle c-border"><i class="iconfont icon-angledown c-gray"></i></a>
            </div>
            <div class="introduce">
                简单应用
            </div>
        </div>

        <div id="draggabilly1" class="c-panel-bd c-panel-collapse mt-medium">
            <div class="tabs tabs-thr tabs-thr-medium c-position-r" data-toggle="tabs">
                <div class="tabs-hd clearfix">
                    <a href="javascript:;" class="curr"><span>HTML</span></a>
                    <a href="javascript:;"><span>Javascript</span></a>
                </div>
                <div class="tabs-bd">
                    <div class="tabs-bd-box c-hide curr p-small">
<pre><code class="html c-break">
    &lt;div id="draggableBox"&gt;
        &lt;pre id="dragLog" class="pre-scrollable"&gt;用于输出演示日志信息&lt;/pre&gt;
        &lt;button id="draggableBtn" type="button" class="button button-primary"&gt;&lt;i class="iconfont icon-arrows fs5"&gt;&lt;/i&gt; &lt;span id="printPosition"&gt;拖动我&lt;/span&gt;&lt;/button&gt;
    &lt;/div&gt;
</code></pre>
                    </div>
                    <div class="tabs-bd-box c-hide p-small">
<pre><code class="javascript">
    var count = 0; // 用于标记日志输出顺序
    var $dragLog = $('#dragLog');
    var $btnPosition = $('#printPosition');
    $('#draggableBtn').draggable({
        container: '#draggableBox',
        before: function() {
            $dragLog.prepend(count++ + ': ' + '[开始] 拖动...\n');
        },
        drag: function(e) {
            $dragLog.prepend(count++ + ': ' + '拖动: pos = ' + JSON.stringify(e.pos) + ', offset = ' + JSON.stringify(e.offset) + '\n');
            $btnPosition.text('(' + e.pos.left + ', ' + e.pos.top + ')');
        },
        finish: function(e) {
            $dragLog.prepend(count++ + ': ' + '[完毕]：pos = ' + JSON.stringify(e.pos) + ', offset = ' + JSON.stringify(e.offset) + '\n');
        }
    });
</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="c-border p-small border-radius-rounded mt-medium">

        <div class="demo-nicescroll w1200 h300 bgc-gray c-main">
            <div id="draggableBox2">
                <pre id="dragLog2" class="pre-scrollable">用于输出演示日志信息</pre>
                <button type="button" class="button button-primary btn-draggable" style="top: 10px; left: 10px"><i class="iconfont icon-arrows fs5"></i> 按钮 #<span class="btn-draggable-id">1</span></button>
                <button type="button" class="button button-action btn-draggable" style="top: 60px; left: 10px"><i class="iconfont icon-arrows fs5"></i> 按钮 #<span class="btn-draggable-id">2</span></button>
                <button type="button" class="button button-highlight btn-draggable" style="top: 110px; left: 110px"><i class="iconfont icon-arrows fs5"></i> 按钮 #<span class="btn-draggable-id">3</span></button>
                <button type="button" class="button button-caution btn-draggable" style="top: 160px; left: 210px"><i class="iconfont icon-arrows fs5"></i> 按钮 #<span class="btn-draggable-id">4</span></button>
            </div>
        </div>



        <fieldset class="c-field c-field-title mt-medium">
            <legend class="fs6">拖动</legend>
        </fieldset>
        <div class="c-field-box c-position-r">
            <div class="c-position-a" style="top: 0; right: 0">
                <a data-toggle="collapse" data-parent="#accordion" href="#draggabilly2" class="border-radius-circle c-border"><i class="iconfont icon-angledown c-gray"></i></a>
            </div>
            <div class="introduce">
                简单应用
            </div>
        </div>

        <div id="draggabilly2" class="c-panel-bd c-panel-collapse mt-medium">
            <div class="tabs tabs-thr tabs-thr-medium c-position-r" data-toggle="tabs">
                <div class="tabs-hd clearfix">
                    <a href="javascript:;" class="curr"><span>HTML</span></a>
                    <a href="javascript:;"><span>Javascript</span></a>
                </div>
                <div class="tabs-bd">
                    <div class="tabs-bd-box c-hide curr p-small">
<pre><code class="html c-break">
    &lt;div id="draggableBox2"&gt;
        &lt;pre id="dragLog2" class="pre-scrollable"&gt;用于输出演示日志信息&lt;/pre&gt;
        &lt;button type="button" class="button button-primary btn-draggable" style="top: 10px; left: 10px;"&gt;&lt;i class="iconfont icon-arrows fs5"&gt;&lt;/i&gt; 按钮 #&lt;span class="btn-draggable-id"&gt;1&lt;/span&gt;&lt;/button&gt;
        &lt;button type="button" class="button button-action btn-draggable" style="top: 60px; left: 10px;"&gt;&lt;i class="iconfont icon-arrows fs5"&gt;&lt;/i&gt; 按钮 #&lt;span class="btn-draggable-id"&gt;2&lt;/span&gt;&lt;/button&gt;
        &lt;button type="button" class="button button-highlight btn-draggable" style="top: 110px; left: 110px;"&gt;&lt;i class="iconfont icon-arrows fs5"&gt;&lt;/i&gt; 按钮 #&lt;span class="btn-draggable-id"&gt;3&lt;/span&gt;&lt;/button&gt;
        &lt;button type="button" class="button button-caution btn-draggable" style="top: 160px; left: 210px;"&gt;&lt;i class="iconfont icon-arrows fs5"&gt;&lt;/i&gt; 按钮 #&lt;span class="btn-draggable-id"&gt;4&lt;/span&gt;&lt;/button&gt;
    &lt;/div&gt;
</code></pre>
                    </div>
                    <div class="tabs-bd-box c-hide p-small">
<pre><code class="javascript">
    var count2 = 0;
    var $dragLog2 = $('#dragLog2');
    $('#draggableBox2').draggable({
        container: '#draggableBox2',
        selector: '.btn-draggable', // 可拖动元素选择器
        before: function(e) {
            $dragLog2.prepend(count2++ + ': ' + '[开始] 拖动【按钮#' + e.element.find('.btn-draggable-id').text() + '】...\n');
        },
        drag: function(e) {
            $dragLog2.prepend(count2++ + ': ' + '拖动【按钮#' + e.element.find('.btn-draggable-id').text() + '】: pos = ' + JSON.stringify(e.pos) + ', offset = ' + JSON.stringify(e.offset) + '\n');
        },
        finish: function(e) {
            $dragLog2.prepend(count2++ + ': ' + '[完毕]【按钮#' + e.element.find('.btn-draggable-id').text() + '】：pos = ' + JSON.stringify(e.pos) + ', offset = ' + JSON.stringify(e.offset) + '\n');
        }
    });
</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-big">
        <h2>参数</h2>
        <table class="tb tb-b c-100 mt-small">
            <tbody>
            <tr>
                <th>参数</th>
                <th>定义</th>
                <th>默认值</th>
                <th>描述</th>
            </tr>
            <tr>
                <td>container</td>
                <td>位置计算容器</td>
                <td>默认 'body'</td>
                <td>使用 jQuery 选择器来指定用于计算位置的父级容器。用于父级容器的节点其 position 应该为 'relative'、'absolute'及'fixed' 中的一种。</td>
            </tr>
            <tr>
                <td>move</td>
                <td>是否移动被拖动元素</td>
                <td>true</td>
                <td>如果设置为 false，则拖动目标元素时并不会更改目标元素当前显示的位置，但仍然可以获得鼠标当前拖到的位置信息。</td>
            </tr>
            <tr>
                <td>selector</td>
                <td>拖动元素选择器 </td>
                <td>""</td>
                <td>当设置此选项后将 $() 选定的元素作为容器，selector 选项用于指定容器内的哪些元素可以拖动。</td>
            </tr>
            <tr>
                <td>handle</td>
                <td>拖动事件触发元素选择器</td>
                <td>null</td>
                <td>用于选择被拖动元素内部元素的选择器，如果指定该选项，则仅当鼠标在指定的子元素上点按鼠标会触发拖动事件。</td>
            </tr>
            <tr>
                <td>stopPropagation</td>
                <td>是否阻止事件冒泡</td>
                <td>false</td>
                <td>如果设置为 true，则拖动发生时与鼠标相关的事件（包括 mousedown、mousemove 和 mouseup）会调用 event.stopPropagation() 来阻止事件冒泡。</td>
            </tr>
            <tr>
                <td>before</td>
                <td>拖动前回调函数</td>
                <td>null</td>
                <td>
                    指定一个回调函数在拖动发生前（mousedown 事件发生时）调用，在此回调函数中返回 false 来取消此次拖动操作。
                    <p>该回调函数参数 e 包含的属性定义如下：</p>
                    <ul class="c-list-circle">
                        <li><code>e.event</code>：鼠标按下时 <code>mousedown</code> 事件参数对象；</li>
                        <li><code>e.element</code>：被拖动元素。</li>
                    </ul>
                    <p>在该回调函数中返回 false 会取消这次拖动操作，后续相关事件也不会发生。</p>
                </td>
            </tr>
            <tr>
                <td>drag</td>
                <td>移动时回调函数</td>
                <td>null</td>
                <td>
                    指定一个回调函数在移动目标元素时前（mousemove 事件发生时）调用。
                    <p>该回调函数参数 e 包含的属性定义如下：</p>
                    <ul class="c-list-circle">
                        <li><code>e.event</code>：鼠标移动时 <code>mousemove</code> 事件参数对象；</li>
                        <li><code>e.element</code>：被拖动元素；</li>
                        <li><code>e.pos</code>：被拖动元素当前相对父级容器（<code>container</code> 指定）的位置；</li>
                        <li><code>e.offset</code>：被拖动元素当前相对于开始拖动时的位置变化；</li>
                        <li><code>e.smallOffset</code>：被拖动元素当前相对于上次位置发生变化时的位置变化；</li>
                        <li><code>e.startOffset</code>：被拖动元素在开始拖动前相对父级容器（<code>container</code> 指定）的位置变化。</li>
                    </ul>
                    <p>由于该回调函数会在拖动时反复调用，不应该在此回调函数中进行过多的操作。</p>
                </td>
            </tr>
            <tr>
                <td>finish</td>
                <td>拖动完成回调函数</td>
                <td>null</td>
                <td>
                    指定一个回调函数在拖动完成后（mouseup 事件发生时）调用。
                    <p>该回调函数参数 e 包含的属性定义如下：</p>
                    <ul class="c-list-circle">
                        <li><code>e.event</code>：鼠标移动时 <code>mousemove</code> 事件参数对象；</li>
                        <li><code>e.element</code>：被拖动元素；</li>
                        <li><code>e.pos</code>：被拖动元素当前相对父级容器（<code>container</code> 指定）的位置；</li>
                        <li><code>e.offset</code>：被拖动元素当前相对于开始拖动时的位置变化；</li>
                        <li><code>e.smallOffset</code>：被拖动元素当前相对于上次位置发生变化时的位置变化；</li>
                        <li><code>e.startOffset</code>：被拖动元素在开始拖动前相对父级容器（<code>container</code> 指定）的位置变化。</li>
                    </ul>
                </td>
            </tr>
            </tbody>
        </table>
    </div>


    <div class="mt-big">
        <h2>方法</h2>
        <table class="tb tb-b c-100 mt-small">
            <tbody>
            <tr>
                <th>
                    方法
                </th>
                <th>
                    描述
                </th>
                <th>
                    实例
                </th>
            </tr>
            <tr>
                <td>
                    destroy
                </td>
                <td>
                    销毁拖拽插件
                </td>
                <td>
<pre><code class="javascript">
    $('#dragEles').draggable('destroy');
</code></pre>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/cross.js"></script>
<script type="text/javascript" src="../js/highlight/highlight.js"></script>
<script type="text/javascript" src="../js/nicescroll/nicescroll.js"></script>
<script type="text/javascript" src="../js/draggable/draggable.js"></script>
<script type="text/javascript">
    $(function(){
        $('pre code').each(function(i, block) {
            hljs.highlightBlock(block);
        });
    });
</script>
<script type="text/javascript">
    $(function(){
        $('.demo-nicescroll').niceScroll({cursorborder:"",cursorcolor:"#cccdd1"});

        $('.demo-nicescroll').on('click',function(){
            $("#demo-nicescroll").getNiceScroll().resize();
        });

        $(".demo-nicescroll").on('mouseover',function() {
            $("#demo-nicescroll").getNiceScroll().resize();
        });

        var count = 0; // 用于标记日志输出顺序
        var $dragLog = $('#dragLog');
        var $btnPosition = $('#printPosition');
        $('#draggableBtn').draggable({
            container: '#draggableBox',
            before: function() {
                $dragLog.prepend(count++ + ': ' + '[开始] 拖动...\n');
            },
            drag: function(e) {
                $dragLog.prepend(count++ + ': ' + '拖动: pos = ' + JSON.stringify(e.pos) + ', offset = ' + JSON.stringify(e.offset) + '\n');
                $btnPosition.text('(' + e.pos.left + ', ' + e.pos.top + ')');
            },
            finish: function(e) {
                $dragLog.prepend(count++ + ': ' + '[完毕]：pos = ' + JSON.stringify(e.pos) + ', offset = ' + JSON.stringify(e.offset) + '\n');
            }
        });




        var count2 = 0;
        var $dragLog2 = $('#dragLog2');
        $('#draggableBox2').draggable({
            container: '#draggableBox2',
            selector: '.btn-draggable', // 可拖动元素选择器
            before: function(e) {
                $dragLog2.prepend(count2++ + ': ' + '[开始] 拖动【按钮#' + e.element.find('.btn-draggable-id').text() + '】...\n');
            },
            drag: function(e) {
                $dragLog2.prepend(count2++ + ': ' + '拖动【按钮#' + e.element.find('.btn-draggable-id').text() + '】: pos = ' + JSON.stringify(e.pos) + ', offset = ' + JSON.stringify(e.offset) + '\n');
            },
            finish: function(e) {
                $dragLog2.prepend(count2++ + ': ' + '[完毕]【按钮#' + e.element.find('.btn-draggable-id').text() + '】：pos = ' + JSON.stringify(e.pos) + ', offset = ' + JSON.stringify(e.offset) + '\n');
            }
        });
    });
</script>
</body>
</html>

