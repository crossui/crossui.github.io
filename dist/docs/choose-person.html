<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>choose person</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="../iconfont/iconfont.css">
    <link rel="stylesheet" href="../css/cross.css">
    <link rel="stylesheet" href="../css/docs.css">
    <link rel="stylesheet" href="../css/highlight.css">
    <link rel="stylesheet" href="../css/ztree.css">
    <link rel="stylesheet" href="../css/artdialog.css">
    <link rel="stylesheet" href="../css/chooseperson.css">
</head>
<body>
<div class="p-medium">
    <div class="form-layout form-horizontal form-horizontal-narrow">
        <div class="control-group">
            <label class="control-label"><sub class="control-sub">*</sub> 人员选择：</label>
            <div class="control-form">
                <textarea class="c-input" rows="5" cols="65" placeholder="请选择人员" data-name="林仙花,林毅" data-id="B06AAE3CB22D45BCB1F88F8CD6CD3C54,662ABB18D95542CF8979A53226AFA53B" id="choose-person-input">林仙花,林毅</textarea>
                <a class="button button-primary button-rounded" href="javascript:;" id="choose-person-btn">选择</a>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/cross.js"></script>
<script type="text/javascript" src="../js/highlight/highlight.js"></script>
<script type="text/javascript" src="../js/artdialog/artdialog.js"></script>
<script type="text/javascript" src="../js/ztree/ztree.js"></script>
<script type="text/javascript" src="../js/chooseperson/chooseperson.js"></script>
<script type="text/javascript">
    $(function(){
        $('pre code').each(function(i, block) {
            hljs.highlightBlock(block);
        });
    });
</script>
<script type="text/javascript">
    $(function(){
        $('#choose-person-btn').on('click',function(){
            chooseperson({
                initDataId:$('#choose-person-input').attr('data-id'),
                initDataName:$('#choose-person-input').attr('data-name'),
                initDataParent:$('#choose-person-input').attr('data-parent'),
                ztreeJsonUrl:'../json/chooseperson/choosepersonztree.json',
                searchJsonUrl:'../json/chooseperson/choosepersonsearch.json',
                artDialogTitle: '请选择人员',
                callBack:function(value){
                    filledData(value,'#choose-person-input');
                }
            });
        });

        function filledData(value,dom){
            var _name=_id='';
            $(value).each(function(i,v){
                _name+= v.name+",";
                _id+= v.id+",";
            });
            _name=_name.substring(0,_name.length-1);
            _id=_id.substring(0,_id.length-1);
            $(dom).val(_name).attr({'data-name':_name,'data-id':_id});
        }
    });
</script>
</body>
</html>

