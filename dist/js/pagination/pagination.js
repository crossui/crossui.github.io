!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e=function(e,n){var s={pageIndex:0,pageSize:10,total:0,pageBtnCount:11,showFirstLastBtn:!0,firstBtnText:null,lastBtnText:null,prevBtnText:"&laquo;",nextBtnText:"&raquo;",loadFirstPage:!0,remote:{url:null,params:null,pageParams:null,success:null,beforeSend:null,complete:null,pageIndexName:"pageIndex",pageSizeName:"pageSize",totalName:"total",traditional:!1},pageElementSort:["$page","$size","$jump","$info"],showInfo:!1,infoFormat:"{start} ~ {end} of {total} entires",noInfoText:"0 entires",showJump:!1,jumpBtnText:"Go",showPageSizes:!1,pageSizeItems:[5,10,15,20],debug:!1};this.$element=t(e),this.$page=t('<ul class="c-pagination-page"></ul>').hide(),this.$size=t('<div class="c-pagination-size"></div>').hide(),this.$jump=t('<div class="c-pagination-jump"></div>').hide(),this.$info=t('<div class="c-pagination-info"></div>').hide(),this.options=t.extend(!0,{},s,t.fn.pagination.defaults,n),n.pageElementSort?this.options.pageElementSort=n.pageElementSort:t.fn.pagination.defaults&&t.fn.pagination.defaults.pageElementSort?this.options.pageElementSort=t.fn.pagination.defaults.pageElementSort:this.options.pageElementSort=s.pageElementSort,this.options.pageSizeItems=n.pageSizeItems||(t.fn.pagination.defaults&&t.fn.pagination.defaults.pageSizeItems?t.fn.pagination.defaults.pageSizeItems:s.pageSizeItems),this.total=this.options.total,this.currentUrl=this.options.remote.url,this.currentPageIndex=a.convertInt(this.options.pageIndex),this.currentPageSize=a.convertInt(this.options.pageSize),this.currentParams=a.deserializeParams(this.options.remote.params)||{},this.getLastPageNum=function(){return i.core.calLastPageNum(this.total,this.currentPageSize)},null===this.options.remote.success&&(this.options.remote.success=this.options.remote.callback),this.init()};e.prototype={getPageIndex:function(){return this.currentPageIndex},getPageSize:function(){return this.currentPageSize},getParams:function(){return this.currentParams},setPageIndex:function(t){void 0!==t&&null!==t&&(this.currentPageIndex=a.convertInt(t))},setPageSize:function(t){void 0!==t&&null!==t&&(this.currentPageSize=a.convertInt(t))},setRemoteUrl:function(t){t&&(this.currentUrl=t)},setParams:function(t){t&&(this.currentParams=a.deserializeParams(t))},render:function(t){void 0!==t&&null!==t&&(this.total=a.convertInt(t)),this.renderPagination(),this.debug("pagination rendered")},init:function(){this.initHtml(),this.initEvent(),this.currentUrl&&this.options.loadFirstPage?this.remote():this.renderPagination(),this.debug("pagination inited")},initHtml:function(){for(var e=t('<select data-page-btn="size"></select>'),n=0;n<this.options.pageSizeItems.length;n++)e.append('<option value="'+this.options.pageSizeItems[n]+'" '+(this.currentPageSize==this.options.pageSizeItems[n]?"selected":"")+" >"+this.options.pageSizeItems[n]+"</option>");e.val(this.currentPageSize),this.$size.append(e);var i='<div class="c-pagination-group"><input data-page-btn="jump" type="text"><button data-page-btn="jump" type="button">'+this.options.jumpBtnText+"</button></div>";this.$jump.append(i);for(n=0;n<this.options.pageElementSort.length;n++)this.$element.append(this[this.options.pageElementSort[n]])},initEvent:function(){this.$element.on("click",{page:this},function(e){if(t(e.target).is("button")){if("jump"==t(e.target).data("pageBtn")){var i=e.data.page.$element.find("input[data-page-btn=jump]");e.data.page.jumpEventHandler(i.val(),e)}}else void 0!==t(e.target).data("pageIndex")&&n.call(e.data.page,e)}).on("change",{page:this},function(e){var i=t(e.target);"jump"==i.data("pageBtn")&&e.data.page.jumpEventHandler(i.val(),e),"size"==i.data("pageBtn")&&n.call(e.data.page,e)}).on("keypress",{page:this},function(t){if("13"==t.keyCode){var e=t.data.page.$element.find("input[data-page-btn=jump]");t.data.page.jumpEventHandler(e.val(),t)}})},jumpEventHandler:function(t,e){t?i.check.checkJumpPage(t)?a.convertInt(t)>this.getLastPageNum()?this.$jump.addClass("error"):(this.$jump.removeClass("error"),n.call(this,e)):this.$jump.addClass("error"):this.$jump.removeClass("error")},doPagination:function(){this.currentUrl?this.remote():this.renderPagination()},remote:function(){if("function"==typeof this.options.remote.pageParams){var e=this.options.remote.pageParams.call(this,{pageIndex:this.currentPageIndex,pageSize:this.currentPageSize});this.currentParams=t.extend({},this.currentParams,e)}else this.currentParams[this.options.remote.pageIndexName]=this.currentPageIndex,this.currentParams[this.options.remote.pageSizeName]=this.currentPageSize;i.remote.getAjax(this,this.currentUrl,this.currentParams,this.ajaxCallBack,this.options.remote.beforeSend,this.options.remote.complete,this.options.remote.traditional)},ajaxCallBack:function(t){var e=a.mapObjectNameRecursion(t,this.options.remote.totalName);if(null==e||void 0==e)throw new Error("the response of totalName :  '"+this.options.remote.totalName+"'  not found.");e=a.convertInt(e),this.total=e;var n=this.getLastPageNum();this.currentPageIndex>0&&n-1<this.currentPageIndex?(this.setPageIndex(n-1),this.remote()):("function"==typeof this.options.remote.success&&this.options.remote.success(t),this.renderPagination())},onEvent:function(t,e,n){null!=e&&(this.currentPageIndex=a.convertInt(e)),null!=n&&(this.currentPageSize=a.convertInt(n)),this.doPagination(),this.$element.trigger(t,{pageIndex:this.currentPageIndex,pageSize:this.currentPageSize}),this.debug("pagination "+t)},renderPagination:function(){var t={showFirstLastBtn:this.options.showFirstLastBtn,firstBtnText:this.options.firstBtnText,prevBtnText:this.options.prevBtnText,nextBtnText:this.options.nextBtnText,lastBtnText:this.options.lastBtnText},e=this.getLastPageNum();this.currentPageIndex=e>0&&this.currentPageIndex>e-1?e-1:this.currentPageIndex,this.$page.empty().append(i.core.renderPages(this.currentPageIndex,this.currentPageSize,this.total,this.options.pageBtnCount,t)).show(),this.options.showPageSizes&&0!==e?this.$size.show():this.$size.hide(),this.options.showJump&&0!==e?this.$jump.show():this.$jump.hide(),this.$info.text(i.core.renderInfo(this.currentPageIndex,this.currentPageSize,this.total,this.options.infoFormat,this.options.noInfoText)),this.options.showInfo?this.$info.show():this.$info.hide()},destroy:function(){this.$element.unbind().data("pagination",null).empty(),this.debug("pagination destroyed")},debug:function(t,e){this.options.debug&&console&&(t&&console.info(t+" : pageIndex = "+this.currentPageIndex+" , pageSize = "+this.currentPageSize+" , total = "+this.total),e&&console.info(e))}};var n=function(e){var n=e.data.page,s=t(e.target);if("click"!==e.type||void 0===s.data("pageIndex")||s.parent().hasClass("active"))if("click"!==e.type&&"keypress"!==e.type||"jump"!==s.data("pageBtn")){if("change"===e.type&&"size"===s.data("pageBtn")){var r=n.$size.find("select").val(),o=i.core.calLastPageNum(n.total,r);o>0&&n.currentPageIndex>o-1&&(n.currentPageIndex=o-1),n.onEvent(i.event.pageSizeChanged,n.currentPageIndex,r)}}else{var p=n.$jump.find("input").val();a.convertInt(p)<=n.getLastPageNum()&&(n.onEvent(i.event.jumpClicked,p-1,null),n.$jump.find("input").val(null))}else n.onEvent(i.event.pageClicked,s.data("pageIndex"),null)},i={};i.event={pageClicked:"pageClicked",jumpClicked:"jumpClicked",pageSizeChanged:"pageSizeChanged"},i.remote={getAjax:function(e,n,i,a,s,r,o){t.ajax({url:n,dataType:"json",data:i,cache:!1,traditional:o,contentType:"application/Json",beforeSend:function(t){"function"==typeof s&&s.call(this,t)},complete:function(t,e){"function"==typeof r&&r.call(this,t,e)},success:function(t){a.call(e,t)}})}},i.core={renderPages:function(t,e,n,i,a){a=a||{};var s=t+1,r=this.calLastPageNum(n,e),o=[];if(r<=i)o=this.renderGroupPages(1,r,s);else{var p=this.renderPerPage(a.firstBtnText||1,0),u=this.renderPerPage(a.lastBtnText||r,r-1),h=(i-1-4)/2;a.showFirstLastBtn||(h+=1);var g=(i+1)/2,c=r-(i+1)/2,l=this.renderPerPage(a.prevBtnText,t-1),d=this.renderPerPage(a.nextBtnText,t+1);h=-1==h.toString().indexOf(".")?h:h+.5,g=-1==g.toString().indexOf(".")?g:g+.5,c=-1==c.toString().indexOf(".")?c:c+.5,s<g?a.showFirstLastBtn?((o=this.renderGroupPages(1,i-2,s)).push(d),o.push(u)):(o=this.renderGroupPages(1,i-1,s)).push(d):s>c?a.showFirstLastBtn?((o=this.renderGroupPages(r-i+3,i-2,s)).unshift(l),o.unshift(p)):(o=this.renderGroupPages(r-i+2,i-1,s)).unshift(l):a.showFirstLastBtn?((o=this.renderGroupPages(s-h,i-4,s)).unshift(l),o.push(d),o.unshift(p),o.push(u)):((o=this.renderGroupPages(s-h,i-2,s)).unshift(l),o.push(d))}return o},renderGroupPages:function(t,e,n){for(var i=[],a=0;a<e;a++){var s=this.renderPerPage(t,t-1);t===n&&s.addClass("active"),i.push(s),t++}return i},renderPerPage:function(e,n){return t("<li><a data-page-index='"+n+"'>"+e+"</a></li>")},renderInfo:function(t,e,n,i,a){if(n<=0)return a;var s=t*e+1,r=(t+1)*e;return r=r>=n?n:r,i.replace("{start}",s).replace("{end}",r).replace("{total}",n)},calLastPageNum:function(t,e){var n=(t=a.convertInt(t))/(e=a.convertInt(e));return a.isDecimal(n)?parseInt(n)+1:n}},i.check={checkJumpPage:function(t){return/^\+?[1-9][0-9]*$/.test(t)}};var a={convertInt:function(t){if("number"==typeof t)return t;var e=parseInt(t);if(isNaN(e))throw new Error("convertInt Type Error.  Type is "+typeof t+", value = "+t);return e},isDecimal:function(t){return parseInt(t)!==t},mapObjectNameRecursion:function(t,e){for(var n=t,i=e.split("."),s=0;s<i.length;s++)n=a.mapObjectName(n,i[s]);return n},mapObjectName:function(t,e){var n=null;for(var i in t)if(t.hasOwnProperty(i)&&i==e){n=t[i];break}return n},deserializeParams:function(t){var e={};if("string"==typeof t)for(var n=t.split("&"),i=0;i<n.length;i++){var a=n[i].split("=");e[a[0]]=decodeURIComponent(a[1])}else if(t instanceof Array)for(i=0;i<t.length;i++)e[t[i].name]=decodeURIComponent(t[i].value);else"object"==typeof t&&(e=t);return e}};t.fn.pagination=function(n){if(void 0===n)return t(this).data("pagination")||!1;var i,a=arguments;return this.each(function(){var s=t(this),r=s.data("pagination");if(!r&&"string"==typeof n)throw new Error("MricodePagination is uninitialized.");if(r&&"object"==typeof n)throw new Error("MricodePagination is initialized.");if(r||"object"!=typeof n)r&&"string"==typeof n&&(i=r[n].apply(r,Array.prototype.slice.call(a,1)));else{var o="object"==typeof n&&n,p=s.data();o=t.extend(o,p),s.data("pagination",r=new e(this,o))}}),void 0===i?this:i}});