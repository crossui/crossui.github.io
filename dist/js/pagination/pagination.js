!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";var t=function(t,n){var r={pageIndex:0,pageSize:10,total:0,pageBtnCount:11,showFirstLastBtn:!0,firstBtnText:null,lastBtnText:null,prevBtnText:"&laquo;",nextBtnText:"&raquo;",loadFirstPage:!0,remote:{url:null,params:null,pageParams:null,success:null,beforeSend:null,complete:null,pageIndexName:"pageIndex",pageSizeName:"pageSize",totalName:"total",traditional:!1},pageElementSort:["$page","$size","$jump","$info"],showInfo:!1,infoFormat:"{start} ~ {end} of {total} entires",noInfoText:"0 entires",showJump:!1,jumpBtnText:"Go",showPageSizes:!1,pageSizeItems:[5,10,15,20],debug:!1};this.$element=e(t),this.$page=e('<ul class="c-pagination-page"></ul>').hide(),this.$size=e('<div class="c-pagination-size"></div>').hide(),this.$jump=e('<div class="c-pagination-jump"></div>').hide(),this.$info=e('<div class="c-pagination-info"></div>').hide(),this.options=e.extend(!0,{},r,e.fn.pagination.defaults,n),n.pageElementSort?this.options.pageElementSort=n.pageElementSort:e.fn.pagination.defaults&&e.fn.pagination.defaults.pageElementSort?this.options.pageElementSort=e.fn.pagination.defaults.pageElementSort:this.options.pageElementSort=r.pageElementSort,this.options.pageSizeItems=n.pageSizeItems||(e.fn.pagination.defaults&&e.fn.pagination.defaults.pageSizeItems?e.fn.pagination.defaults.pageSizeItems:r.pageSizeItems),this.total=this.options.total,this.currentUrl=this.options.remote.url,this.currentPageIndex=a.convertInt(this.options.pageIndex),this.currentPageSize=a.convertInt(this.options.pageSize),this.currentParams=a.deserializeParams(this.options.remote.params)||{},this.getLastPageNum=function(){return i.core.calLastPageNum(this.total,this.currentPageSize)},null===this.options.remote.success&&(this.options.remote.success=this.options.remote.callback),this.init()};t.prototype={getPageIndex:function(){return this.currentPageIndex},getPageSize:function(){return this.currentPageSize},getParams:function(){return this.currentParams},setPageIndex:function(e){void 0!==e&&null!==e&&(this.currentPageIndex=a.convertInt(e))},setPageSize:function(e){void 0!==e&&null!==e&&(this.currentPageSize=a.convertInt(e))},setRemoteUrl:function(e){e&&(this.currentUrl=e)},setParams:function(e){e&&(this.currentParams=a.deserializeParams(e))},render:function(e){void 0!==e&&null!==e&&(this.total=a.convertInt(e)),this.renderPagination(),this.debug("pagination rendered")},init:function(){this.initHtml(),this.initEvent(),this.currentUrl&&this.options.loadFirstPage?this.remote():this.renderPagination(),this.debug("pagination inited")},initHtml:function(){for(var t=e('<select data-page-btn="size"></select>'),n=0;n<this.options.pageSizeItems.length;n++)t.append('<option value="'+this.options.pageSizeItems[n]+'" '+(this.currentPageSize==this.options.pageSizeItems[n]?"selected":"")+" >"+this.options.pageSizeItems[n]+"</option>");t.val(this.currentPageSize),this.$size.append(t);var i='<div class="c-pagination-group"><input data-page-btn="jump" type="text"><button data-page-btn="jump" type="button">'+this.options.jumpBtnText+"</button></div>";this.$jump.append(i);for(var n=0;n<this.options.pageElementSort.length;n++)this.$element.append(this[this.options.pageElementSort[n]])},initEvent:function(){this.$element.on("click",{page:this},function(t){if(e(t.target).is("button")){if("jump"==e(t.target).data("pageBtn")){var i=t.data.page.$element.find("input[data-page-btn=jump]");t.data.page.jumpEventHandler(i.val(),t)}}else void 0!==e(t.target).data("pageIndex")&&n.call(t.data.page,t)}).on("change",{page:this},function(t){var i=e(t.target);"jump"==i.data("pageBtn")&&t.data.page.jumpEventHandler(i.val(),t),"size"==i.data("pageBtn")&&n.call(t.data.page,t)}).on("keypress",{page:this},function(e){if("13"==e.keyCode){var t=e.data.page.$element.find("input[data-page-btn=jump]");e.data.page.jumpEventHandler(t.val(),e)}})},jumpEventHandler:function(e,t){e?i.check.checkJumpPage(e)?a.convertInt(e)>this.getLastPageNum()?this.$jump.addClass("error"):(this.$jump.removeClass("error"),n.call(this,t)):this.$jump.addClass("error"):this.$jump.removeClass("error")},doPagination:function(){this.currentUrl?this.remote():this.renderPagination()},remote:function(){if("function"==typeof this.options.remote.pageParams){var t=this.options.remote.pageParams.call(this,{pageIndex:this.currentPageIndex,pageSize:this.currentPageSize});this.currentParams=e.extend({},this.currentParams,t)}else this.currentParams[this.options.remote.pageIndexName]=this.currentPageIndex,this.currentParams[this.options.remote.pageSizeName]=this.currentPageSize;i.remote.getAjax(this,this.currentUrl,this.currentParams,this.ajaxCallBack,this.options.remote.beforeSend,this.options.remote.complete,this.options.remote.traditional)},ajaxCallBack:function(e){var t=a.mapObjectNameRecursion(e,this.options.remote.totalName);if(null==t||void 0==t)throw new Error("the response of totalName :  '"+this.options.remote.totalName+"'  not found.");t=a.convertInt(t),this.total=t;var n=this.getLastPageNum();this.currentPageIndex>0&&n-1<this.currentPageIndex?(this.setPageIndex(n-1),this.remote()):("function"==typeof this.options.remote.success&&this.options.remote.success(e),this.renderPagination())},onEvent:function(e,t,n){null!=t&&(this.currentPageIndex=a.convertInt(t)),null!=n&&(this.currentPageSize=a.convertInt(n)),this.doPagination(),this.$element.trigger(e,{pageIndex:this.currentPageIndex,pageSize:this.currentPageSize}),this.debug("pagination "+e)},renderPagination:function(){var e={showFirstLastBtn:this.options.showFirstLastBtn,firstBtnText:this.options.firstBtnText,prevBtnText:this.options.prevBtnText,nextBtnText:this.options.nextBtnText,lastBtnText:this.options.lastBtnText},t=this.getLastPageNum();this.currentPageIndex=t>0&&this.currentPageIndex>t-1?t-1:this.currentPageIndex,this.$page.empty().append(i.core.renderPages(this.currentPageIndex,this.currentPageSize,this.total,this.options.pageBtnCount,e)).show(),this.options.showPageSizes&&0!==t?this.$size.show():this.$size.hide(),this.options.showJump&&0!==t?this.$jump.show():this.$jump.hide(),this.$info.text(i.core.renderInfo(this.currentPageIndex,this.currentPageSize,this.total,this.options.infoFormat,this.options.noInfoText)),this.options.showInfo?this.$info.show():this.$info.hide()},destroy:function(){this.$element.unbind().data("pagination",null).empty(),this.debug("pagination destroyed")},debug:function(e,t){this.options.debug&&console&&(e&&console.info(e+" : pageIndex = "+this.currentPageIndex+" , pageSize = "+this.currentPageSize+" , total = "+this.total),t&&console.info(t))}};var n=function(t){var n=t.data.page,r=e(t.target);if("click"!==t.type||void 0===r.data("pageIndex")||r.parent().hasClass("active"))if("click"!==t.type&&"keypress"!==t.type||"jump"!==r.data("pageBtn")){if("change"===t.type&&"size"===r.data("pageBtn")){var s=n.$size.find("select").val(),o=i.core.calLastPageNum(n.total,s);o>0&&n.currentPageIndex>o-1&&(n.currentPageIndex=o-1),n.onEvent(i.event.pageSizeChanged,n.currentPageIndex,s)}}else{var p=n.$jump.find("input").val();a.convertInt(p)<=n.getLastPageNum()&&(n.onEvent(i.event.jumpClicked,p-1,null),n.$jump.find("input").val(null))}else n.onEvent(i.event.pageClicked,r.data("pageIndex"),null)},i={};i.event={pageClicked:"pageClicked",jumpClicked:"jumpClicked",pageSizeChanged:"pageSizeChanged"},i.remote={getAjax:function(t,n,i,a,r,s,o){e.ajax({url:n,dataType:"json",data:i,cache:!1,traditional:o,contentType:"application/Json",beforeSend:function(e){"function"==typeof r&&r.call(this,e)},complete:function(e,t){"function"==typeof s&&s.call(this,e,t)},success:function(e){a.call(t,e)}})}},i.core={renderPages:function(e,t,n,i,a){a=a||{};var r=e+1,s=this.calLastPageNum(n,t),o=[];if(s<=i)o=this.renderGroupPages(1,s,r);else{var p=this.renderPerPage(a.firstBtnText||1,0),u=this.renderPerPage(a.lastBtnText||s,s-1),h=(i-1-4)/2;a.showFirstLastBtn||(h+=1);var g=(i+1)/2,c=s-(i+1)/2,l=this.renderPerPage(a.prevBtnText,e-1),d=this.renderPerPage(a.nextBtnText,e+1);h=h.toString().indexOf(".")==-1?h:h+.5,g=g.toString().indexOf(".")==-1?g:g+.5,c=c.toString().indexOf(".")==-1?c:c+.5,r<g?a.showFirstLastBtn?(o=this.renderGroupPages(1,i-2,r),o.push(d),o.push(u)):(o=this.renderGroupPages(1,i-1,r),o.push(d)):r>c?a.showFirstLastBtn?(o=this.renderGroupPages(s-i+3,i-2,r),o.unshift(l),o.unshift(p)):(o=this.renderGroupPages(s-i+2,i-1,r),o.unshift(l)):a.showFirstLastBtn?(o=this.renderGroupPages(r-h,i-4,r),o.unshift(l),o.push(d),o.unshift(p),o.push(u)):(o=this.renderGroupPages(r-h,i-2,r),o.unshift(l),o.push(d))}return o},renderGroupPages:function(e,t,n){for(var i=[],a=0;a<t;a++){var r=this.renderPerPage(e,e-1);e===n&&r.addClass("active"),i.push(r),e++}return i},renderPerPage:function(t,n){return e("<li><a data-page-index='"+n+"'>"+t+"</a></li>")},renderInfo:function(e,t,n,i,a){if(n<=0)return a;var r=e*t+1,s=(e+1)*t;return s=s>=n?n:s,i.replace("{start}",r).replace("{end}",s).replace("{total}",n)},calLastPageNum:function(e,t){e=a.convertInt(e),t=a.convertInt(t);var n=e/t;return a.isDecimal(n)?parseInt(n)+1:n}},i.check={checkJumpPage:function(e){var t=/^\+?[1-9][0-9]*$/;return t.test(e)}};var a={convertInt:function(e){if("number"==typeof e)return e;var t=parseInt(e);if(isNaN(t))throw new Error("convertInt Type Error.  Type is "+typeof e+", value = "+e);return t},isDecimal:function(e){return parseInt(e)!==e},mapObjectNameRecursion:function(e,t){for(var n=e,i=t.split("."),r=0;r<i.length;r++)n=a.mapObjectName(n,i[r]);return n},mapObjectName:function(e,t){var n=null;for(var i in e)if(e.hasOwnProperty(i)&&i==t){n=e[i];break}return n},deserializeParams:function(e){var t={};if("string"==typeof e)for(var n=e.split("&"),i=0;i<n.length;i++){var a=n[i].split("=");t[a[0]]=decodeURIComponent(a[1])}else if(e instanceof Array)for(var i=0;i<e.length;i++)t[e[i].name]=decodeURIComponent(e[i].value);else"object"==typeof e&&(t=e);return t}};e.fn.pagination=function(n){if("undefined"==typeof n)return e(this).data("pagination")||!1;var i,a=arguments;return this.each(function(){var r=e(this),s=r.data("pagination");if(!s&&"string"==typeof n)throw new Error("MricodePagination is uninitialized.");if(s&&"object"==typeof n)throw new Error("MricodePagination is initialized.");if(s||"object"!=typeof n)s&&"string"==typeof n&&(i=s[n].apply(s,Array.prototype.slice.call(a,1)));else{var o="object"==typeof n&&n,p=r.data();o=e.extend(o,p),r.data("pagination",s=new t(this,o))}}),"undefined"==typeof i?this:i}});